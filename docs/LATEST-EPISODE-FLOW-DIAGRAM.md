# Latest Episode Date - Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SINGLE SOURCE OF TRUTH                       â”‚
â”‚                                                                      â”‚
â”‚                    ğŸ“„ data/podcasts.xml                              â”‚
â”‚                                                                      â”‚
â”‚              <latest_episode_date>2025-10-16 14:00:00</...>         â”‚
â”‚                                                                      â”‚
â”‚                    Format: YYYY-MM-DD HH:MM:SS                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–²
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚               â”‚               â”‚
                    â”‚               â”‚               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  CRON JOB       â”‚  â”‚   MANUAL    â”‚  â”‚   IMPORT     â”‚
        â”‚  (Hourly)       â”‚  â”‚   REFRESH   â”‚  â”‚   PROCESS    â”‚
        â”‚                 â”‚  â”‚   BUTTON    â”‚  â”‚              â”‚
        â”‚  auto-scan-     â”‚  â”‚  refresh-   â”‚  â”‚  index.php   â”‚
        â”‚  feeds.php      â”‚  â”‚  feed-      â”‚  â”‚  (lines      â”‚
        â”‚                 â”‚  â”‚  metadata   â”‚  â”‚   36-49)     â”‚
        â”‚  Lines 78-93    â”‚  â”‚  .php       â”‚  â”‚              â”‚
        â”‚                 â”‚  â”‚             â”‚  â”‚              â”‚
        â”‚  Runs every     â”‚  â”‚  User       â”‚  â”‚  On new      â”‚
        â”‚  hour           â”‚  â”‚  clicks     â”‚  â”‚  podcast     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚               â”‚               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ All update via:
                                    â”‚ PodcastManager::
                                    â”‚ updatePodcastMetadata()
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
                    â”‚   ğŸ“¡ RssFeedParser            â”‚
                    â”‚   fetchFeedMetadata()         â”‚
                    â”‚                               â”‚
                    â”‚   Fetches from live RSS feed  â”‚
                    â”‚   Returns: YYYY-MM-DD HH:MM:SSâ”‚
                    â”‚                               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA DISTRIBUTION                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    ğŸ“„ data/podcasts.xml
                            â”‚
                            â”‚ Read by PodcastManager
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚               â”‚
            â”‚               â”‚               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  index.php   â”‚  â”‚  API       â”‚  â”‚  Modals      â”‚
    â”‚  (Server)    â”‚  â”‚  Endpoints â”‚  â”‚  (Client)    â”‚
    â”‚              â”‚  â”‚            â”‚  â”‚              â”‚
    â”‚  Renders:    â”‚  â”‚  Returns:  â”‚  â”‚  Read from:  â”‚
    â”‚  <tr data-   â”‚  â”‚  JSON with â”‚  â”‚  HTML data   â”‚
    â”‚  latest-     â”‚  â”‚  latest_   â”‚  â”‚  attributes  â”‚
    â”‚  episode=    â”‚  â”‚  episode_  â”‚  â”‚              â”‚
    â”‚  "...">      â”‚  â”‚  date      â”‚  â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                â”‚                â”‚
           â”‚                â”‚                â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ All use same format:
                            â”‚ YYYY-MM-DD HH:MM:SS
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                               â”‚
            â”‚   ğŸ¨ DISPLAY LAYER            â”‚
            â”‚   (All use same calculation)  â”‚
            â”‚                               â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚               â”‚
            â”‚               â”‚               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Main Page   â”‚  â”‚  Player    â”‚  â”‚  Podcast     â”‚
    â”‚  Table       â”‚  â”‚  Modal     â”‚  â”‚  Info Modal  â”‚
    â”‚              â”‚  â”‚            â”‚  â”‚              â”‚
    â”‚  app.js      â”‚  â”‚  player-   â”‚  â”‚  app.js      â”‚
    â”‚  formatLatestâ”‚  â”‚  modal.js  â”‚  â”‚  (preview)   â”‚
    â”‚  EpisodeDate â”‚  â”‚  formatDateâ”‚  â”‚              â”‚
    â”‚  ()          â”‚  â”‚  ()        â”‚  â”‚              â”‚
    â”‚              â”‚  â”‚            â”‚  â”‚              â”‚
    â”‚  Lines       â”‚  â”‚  Lines     â”‚  â”‚  Lines       â”‚
    â”‚  1663-1705   â”‚  â”‚  616-644   â”‚  â”‚  1517-1546   â”‚
    â”‚              â”‚  â”‚            â”‚  â”‚              â”‚
    â”‚  Shows:      â”‚  â”‚  Shows:    â”‚  â”‚  Shows:      â”‚
    â”‚  "Yesterday" â”‚  â”‚  "Yesterdayâ”‚  â”‚  "Yesterday" â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CALCULATION LOGIC (SHARED)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Input: "2025-10-16 14:00:00"
        â”‚
        â–¼
    new Date(dateString)
        â”‚
        â–¼
    Reset to midnight
    (strip time component)
        â”‚
        â–¼
    Calculate days difference
    from today at midnight
        â”‚
        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  diffDays === 0  â†’  "Today"     â”‚
    â”‚  diffDays === 1  â†’  "Yesterday" â”‚
    â”‚  diffDays < 7    â†’  "X days ago"â”‚
    â”‚  diffDays >= 7   â†’  "Oct 16"    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
    Display to user


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         UPDATE FLOW                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    User clicks refresh button
            â”‚
            â–¼
    api/refresh-feed-metadata.php
            â”‚
            â”œâ”€â†’ Fetch from RSS feed
            â”‚   (RssFeedParser)
            â”‚
            â”œâ”€â†’ Update XML database
            â”‚   (PodcastManager)
            â”‚
            â””â”€â†’ Return JSON response
                    â”‚
                    â–¼
            JavaScript receives response
                    â”‚
                    â”œâ”€â†’ Update row.dataset.latestEpisode
                    â”‚   (Line 1342 in app.js)
                    â”‚
                    â””â”€â†’ Show success message
                            â”‚
                            â–¼
                    All three display locations
                    now show updated date
                    (no page reload needed!)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CACHE BUSTING FLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    Developer updates JavaScript
            â”‚
            â–¼
    Update ASSETS_VERSION in config.php
    (e.g., '20251017_1001' â†’ '20251017_1430')
            â”‚
            â–¼
    Deploy to production
            â”‚
            â–¼
    User loads page
            â”‚
            â–¼
    Browser requests:
    app.js?v=20251017_1430
            â”‚
            â”œâ”€â†’ New version! Fetch from server
            â”‚   (not from cache)
            â”‚
            â””â”€â†’ Execute new JavaScript
                    â”‚
                    â–¼
            Latest functions available
            All features work correctly


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         KEY PRINCIPLES                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    1. ONE SOURCE OF TRUTH
       â””â”€â†’ data/podcasts.xml

    2. ONE UPDATE METHOD
       â””â”€â†’ PodcastManager::updatePodcastMetadata()

    3. ONE DATA FORMAT
       â””â”€â†’ YYYY-MM-DD HH:MM:SS

    4. ONE DATA ATTRIBUTE
       â””â”€â†’ data-latest-episode

    5. ONE CALCULATION LOGIC
       â””â”€â†’ Midnight normalization + day difference

    6. ONE CACHE STRATEGY
       â””â”€â†’ ASSETS_VERSION parameter


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONSISTENCY GUARANTEES                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    âœ… All dates come from XML database
    âœ… All updates go through PodcastManager
    âœ… All displays read from data-latest-episode
    âœ… All calculations use same JavaScript logic
    âœ… All users get latest code via cache busting

    = CONSISTENT DATES EVERYWHERE! ğŸ‰
```
